// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ä—Ç—É
const map = new maplibregl.Map({
  container: 'map',
//  style: "https://raw.githubusercontent.com/gtitov/basemaps/refs/heads/master/positron-nolabels.json",
   style: {
   "version": 8,
   "sources": {},
   "layers": []
 },
  center: [51, 0],
  zoom: 4
});

map.on('load', () => {
        // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç—ã
    
    map.addLayer({
       id: 'background',
       type: 'background',
       paint: {
       'background-color': 'lightblue'
       }
   })
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    map.addSource('countries', {
        type: 'geojson',
        data: './data/countries.geojson',
        attribution: 'Natural Earth'
    })

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è
    map.addLayer({
        id: 'countries-layer',
        type: 'fill',
        source: 'countries',
        paint: {
            'fill-color': ['match', ['get', 'MAPCOLOR7'], 1, 'red', 'lightgray']
        }
    })
    // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç—ã
    map.addSource('rivers', {
        type: 'geojson',
        data: './data/rivers.geojson'
    })

    map.addLayer({
        id: 'rivers-layer',
        type: 'line',
        source: 'rivers',
        paint: {
            'line-color': '#82e1f1'
        }
    })

    map.addSource('lakes', {
        type: 'geojson',
        data: './data/lakes.geojson'
    })

    map.addLayer({
        id: 'lakes-layer',
        type: 'fill',
        source: 'lakes',
        paint: {
            'fill-color': 'lightblue',
            'fill-outline-color': '#00BFFF'
        }
    })

    map.addSource('cities', {
        type: 'geojson',
        data: './data/cities.geojson'
    })
    map.addLayer({
        id: 'cities-layer',
        type: 'circle',
        source: 'cities',
        paint: {
            'circle-color': 'rgb(23, 55, 240)',
            'circle-radius': 10
        },
        filter: ['>', ['get', 'POP_MAX'], 1000000]

    })

    map.on('mouseenter', 'cities-layer', () => {
        map.getCanvas().style.cursor = 'pointer'
    })
    map.on('mouseleave', 'cities-layer', () => {
        map.getCanvas().style.cursor = ''
    })

    map.on('click', ['cities-layer'], (e) => {
        // console.log(e)
        // console.log(e.features)
        new maplibregl.Popup() // —Å–æ–∑–¥–∞–¥–∏–º –ø–æ–ø–∞–ø
            .setLngLat(e.features[0].geometry.coordinates) // —É—Å—Ç–∞–Ω–æ–≤–∏–º –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö –æ–±—ä–µ–∫—Ç–∞
            .setHTML(e.features[0].properties.NAME) // –∑–∞–ø–æ–ª–Ω–∏–º  —Ç–µ–∫—Å—Ç–æ–º –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–∞ —Å –∏–º–µ–Ω–µ–º –æ–±—ä–µ–∫—Ç–∞
            .addTo(map); // –¥–æ–±–∞–≤–∏–º –Ω–∞ –∫–∞—Ä—Ç—É
    })
})

–ò–ù–¥–µ–∫—Å

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å–µ–ª–µ–Ω–∏–µ –º–∏—Ä–∞</title>
    <!-- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å—Ç–∏–ª–∏ üëá -->
    <link rel="stylesheet" href="style.css">
    <!-- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É MapLibre üëá -->
    <script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
</head>

<body>
    <!-- –†–∞–∑–º–µ—á–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–∞—Ä—Ç—ã üëá -->
    <div id="map"></div>
    <!-- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ª–æ–≥–∏–∫—É –∫–∞—Ä—Ç—ã üëá -->
    <script src="main.js"></script>
</body>

</html>